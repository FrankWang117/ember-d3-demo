<div class="article" ...attributes>
    {{!-- <h2 class="p-1">d3-1 helloworld</h2>
    <p class="d3-hello" {{did-insert this.hello}}></p>
    <div class="dropdown-divider"></div> --}}
    <div id="export_content"><div class="output_wrapper" id="output_wrapper_id"><h1 id="hd3jshelloworld"><span>由浅入深的 D3.js 初级及进阶指南 之一 HelloWorld</span></h1>
<p>任何教程的开端离不开 hello world ,我们也不能免俗. D3.js 拥有中非常强大的对 DOM 进行操作的能力.现在就简单的操作一下.    </p>
<p>所需环境:</p>
<ul>
<li><span>ember-cli v3.16.1  </span></li>
<li><span>node v10.16.0</span></li>
<li><span>d3.js v5  </span></li>
</ul>
<p>环境搭建详见 <a href="https://blog.csdn.net/peng_9/article/details/105082971">由浅入深的 D3.js (v5/v4) 初级及进阶指南  之零 背景介绍与环境安装</a> </p>
<h2 id="h0"><span>0. 前言</span></h2>
<p><code>select</code> 方法在 D3.js 中占据中重要的位置.任何 DOM 操作的起点.可以通过此方法,获取到想要操作的 DOM.  <br>这也就是告诉我们,在框架中使用 D3.js 的时候,需要在组件元素或其他元素插入到文档中,大概就是 <code>didInsert</code> 这个声明周期之后,才能进行对 DOM 的操作.  </p>
<h2 id="h1d3jshelloworld"><span>1. 使用 D3.js 展示 Hello world 文本</span></h2>
<h3 id="h11d3helloworld"><span>1.1 创建 d3/hello-world 组件</span></h3>
<pre><code class="shell language-shell hljs"><span class="linenum hljs-number">1</span>ember&nbsp;g&nbsp;component&nbsp;d3/hello-world<br></code></pre>
<p>原生 JavaScript 的话及可以直接在页面中添加 p 标签.<br>修改 handlerbars ：</p>
<pre><code class="handlerbars language-handlerbars"><span class="linenum hljs-number">1</span>&lt;p&nbsp;class="d3-hello"&nbsp;\{{did-insert&nbsp;this.hello}}&gt;&lt;/p&gt;<br></code></pre>
<p>修改 component 逻辑文件:</p>
<pre><code class="javascript language-javascript hljs"><span class="linenum hljs-number"> 1</span><span class="hljs-keyword">import</span>&nbsp;Component&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'@glimmer/component'</span>;<br><span class="linenum hljs-number"> 2</span><span class="hljs-keyword">import</span>&nbsp;{&nbsp;action&nbsp;}&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'@ember/object'</span>;<br><span class="linenum hljs-number"> 3</span><span class="hljs-keyword">import</span>&nbsp;{select}&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'d3-selection'</span>;<br><span class="linenum hljs-number"> 4</span><br><span class="linenum hljs-number"> 5</span>interface&nbsp;D3HelloWorldArgs&nbsp;{}<br><span class="linenum hljs-number"> 6</span><br><span class="linenum hljs-number"> 7</span><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">D3HelloWorld</span>&nbsp;<span class="hljs-keyword">extends</span>&nbsp;<span class="hljs-title">Component</span>&lt;<span class="hljs-title">D3HelloWorldArgs</span>&gt;&nbsp;</span>{<br><span class="linenum hljs-number"> 8</span>&nbsp;&nbsp;&nbsp;&nbsp;@action<br><span class="linenum hljs-number"> 9</span>&nbsp;&nbsp;&nbsp;&nbsp;hello()&nbsp;{<br><span class="linenum hljs-number">10</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select(<span class="hljs-string">".d3-hello"</span>).text(<span class="hljs-string">"HELLOWORLD&nbsp;BY&nbsp;D3"</span>)<br><span class="linenum hljs-number">11</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br><span class="linenum hljs-number">12</span>}<br></code></pre>
<p>在路由中使用此组件：</p>
<pre><code class="handlerbars language-handlerbars"><span class="linenum hljs-number">1</span>{{!--&nbsp;d3&nbsp;route&nbsp;file&nbsp;--}}<br><span class="linenum hljs-number">2</span>&lt;h2&gt;d3-1&nbsp;helloworld&lt;/h2&gt;<br><span class="linenum hljs-number">3</span>&lt;D3::HelloWorld&nbsp;/&gt;<br></code></pre>
<p>此时运行文件即可以看到：  <br></p><figure><img src="https://img-blog.csdnimg.cn/20200304210042299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3BlbmdfOQ==,size_16,color_FFFFFF,t_70" alt="hello world" title="hello world"><figcaption>hello world</figcaption></figure>
<p>同样的：</p>
<pre><code class="handlerbars language-handlerbars"><span class="linenum hljs-number"> 1</span>import&nbsp;Component&nbsp;from&nbsp;'@glimmer/component';<br><span class="linenum hljs-number"> 2</span>import&nbsp;{&nbsp;action&nbsp;}&nbsp;from&nbsp;'@ember/object';<br><span class="linenum hljs-number"> 3</span>import&nbsp;{select}&nbsp;from&nbsp;'d3-selection';<br><span class="linenum hljs-number"> 4</span><br><span class="linenum hljs-number"> 5</span>interface&nbsp;D3HelloWorldArgs&nbsp;{}<br><span class="linenum hljs-number"> 6</span><br><span class="linenum hljs-number"> 7</span>export&nbsp;default&nbsp;class&nbsp;D3HelloWorld&nbsp;extends&nbsp;Component&lt;D3HelloWorldArgs&gt;&nbsp;{<br><span class="linenum hljs-number"> 8</span>&nbsp;&nbsp;&nbsp;&nbsp;@action<br><span class="linenum hljs-number"> 9</span>&nbsp;&nbsp;&nbsp;&nbsp;hello()&nbsp;{<br><span class="linenum hljs-number">10</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;p&nbsp;=&nbsp;select(".d3-hello").text("HELLOWORLD&nbsp;BY&nbsp;D3");<br><span class="linenum hljs-number">11</span><br><span class="linenum hljs-number">12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;修改此元素的样式<br><span class="linenum hljs-number">13</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.attr("title","helloWorld").style("color","lightblue")<br><span class="linenum hljs-number">14</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br><span class="linenum hljs-number">15</span>}<br></code></pre>
<p>这样就可以改变字体的 style 样式了，并为此 P 标签添加了 title 属性，虽然没有什么作用。  <br>更多的关于 <a href="https://github.com/xswei/d3-selection/blob/master/README.md#modifying-elements">d3-selection</a> 的 API 请查看链接。  </p>
<h2 id="h2datumdata"><span>2. 使用 .datum() / .data() 绑定数据</span></h2>
<p>同样的创建 d3/bind-data 组件。  </p>
<pre><code class="handlerbars language-handlerbars"><span class="linenum hljs-number">1</span>{{!--&nbsp;d3/bind-data.hbs&nbsp;--}}<br><span class="linenum hljs-number">2</span>&lt;p&nbsp;class="d3-bind"&nbsp;\{{did-insert&nbsp;this.dataBind}}&gt;&lt;/p&gt;<br><span class="linenum hljs-number">3</span>&lt;p&nbsp;class="d3-bind"&nbsp;\{{did-insert&nbsp;this.dataBind}}&gt;&lt;/p&gt;<br><span class="linenum hljs-number">4</span>&lt;p&nbsp;class="d3-bind"&nbsp;\{{did-insert&nbsp;this.dataBind}}&gt;&lt;/p&gt;<br><span class="linenum hljs-number">5</span>&lt;p&nbsp;class="d3-bind"&nbsp;\{{did-insert&nbsp;this.dataBind}}&gt;&lt;/p&gt;<br><span class="linenum hljs-number">6</span><br><span class="linenum hljs-number">7</span>&lt;p&nbsp;class="d3-bind2"&nbsp;\{{did-insert&nbsp;this.dataBind2}}&gt;&lt;/p&gt;<br><span class="linenum hljs-number">8</span>&lt;p&nbsp;class="d3-bind2"&nbsp;\{{did-insert&nbsp;this.dataBind2}}&gt;&lt;/p&gt;<br></code></pre>
<pre><code class="javascript language-javascript hljs"><span class="linenum hljs-number"> 1</span><span class="hljs-comment">//&nbsp;d3/bind-data.ts</span><br><span class="linenum hljs-number"> 2</span><span class="hljs-keyword">import</span>&nbsp;Component&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'@glimmer/component'</span>;<br><span class="linenum hljs-number"> 3</span><span class="hljs-keyword">import</span>&nbsp;{&nbsp;selectAll&nbsp;}&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'d3-selection'</span>;<br><span class="linenum hljs-number"> 4</span><span class="hljs-keyword">import</span>&nbsp;{&nbsp;action&nbsp;}&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'@ember/object'</span>;<br><span class="linenum hljs-number"> 5</span><br><span class="linenum hljs-number"> 6</span>interface&nbsp;D3BindDataArgs&nbsp;{&nbsp;}<br><span class="linenum hljs-number"> 7</span><br><span class="linenum hljs-number"> 8</span><span class="hljs-keyword">const</span>&nbsp;STR&nbsp;=&nbsp;<span class="hljs-string">"DATABIND"</span>;<br><span class="linenum hljs-number"> 9</span><span class="hljs-keyword">const</span>&nbsp;ARR&nbsp;=&nbsp;[<span class="hljs-string">"落霞与孤鹜齐飞"</span>,<span class="hljs-string">"秋水共长天一色"</span>];<br><span class="linenum hljs-number">10</span><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">D3BindData</span>&nbsp;<span class="hljs-keyword">extends</span>&nbsp;<span class="hljs-title">Component</span>&lt;<span class="hljs-title">D3BindDataArgs</span>&gt;&nbsp;</span>{<br><span class="linenum hljs-number">11</span>&nbsp;&nbsp;&nbsp;&nbsp;@action<br><span class="linenum hljs-number">12</span>&nbsp;&nbsp;&nbsp;&nbsp;dataBind()&nbsp;{<br><span class="linenum hljs-number">13</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">let</span>&nbsp;p&nbsp;=&nbsp;selectAll(<span class="hljs-string">'.d3-bind'</span>);<br><span class="linenum hljs-number">14</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.datum(STR)<br><span class="linenum hljs-number">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.text(<span class="hljs-function"><span class="hljs-keyword">function</span>&nbsp;(<span class="hljs-params">d,&nbsp;i</span>)&nbsp;</span>{<br><span class="linenum hljs-number">16</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-string">`✨第&nbsp;<span class="hljs-subst">${i}</span>&nbsp;个元素绑定的值是&nbsp;<span class="hljs-subst">${d}</span>✨`</span><br><span class="linenum hljs-number">17</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br><span class="linenum hljs-number">18</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br><span class="linenum hljs-number">19</span>&nbsp;&nbsp;&nbsp;&nbsp;@action<br><span class="linenum hljs-number">20</span>&nbsp;&nbsp;&nbsp;&nbsp;dataBind2()&nbsp;{<br><span class="linenum hljs-number">21</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">let</span>&nbsp;ps&nbsp;=&nbsp;selectAll(<span class="hljs-string">".d3-bind2"</span>);<br><span class="linenum hljs-number">22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ps.data(ARR).text(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>)&nbsp;</span>{<br><span class="linenum hljs-number">23</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;d<br><span class="linenum hljs-number">24</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br><span class="linenum hljs-number">25</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br><span class="linenum hljs-number">26</span>}<br></code></pre>
<p>同样的，在路由中使用此组件：</p>
<pre><code class="handlerbars language-handlerbars"><span class="linenum hljs-number">1</span>{{!--&nbsp;d3&nbsp;route&nbsp;file&nbsp;--}}<br><span class="linenum hljs-number">2</span>&lt;h2&gt;d3-1&nbsp;helloworld&lt;/h2&gt;<br><span class="linenum hljs-number">3</span>&lt;D3::HelloWorld&nbsp;/&gt;<br><span class="linenum hljs-number">4</span>&lt;div&nbsp;class="dropdown-divider"&gt;&lt;/div&gt;<br><span class="linenum hljs-number">5</span>&lt;h2&gt;d3-2&nbsp;bind-data&lt;/h2&gt;<br><span class="linenum hljs-number">6</span>&lt;D3::BindData&nbsp;/&gt;<br></code></pre>
<p>运行程序可以看到：<br></p><figure><img src="https://img-blog.csdnimg.cn/20200304210131585.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3BlbmdfOQ==,size_16,color_FFFFFF,t_70" alt="bind-data" title="bind-data"><figcaption>bind-data</figcaption></figure>
<h2 id="h3"><span>3. 总结</span></h2>
<p>在这篇文章中,对 D3.js 中 <code>select</code> 及其相关方法应该是有比较深刻的了解,如果没有,那么在以后的教程中我们也是会经常看到的.  <br>更多关于 <code>select</code> 及其相关方法也可以<a href="https://github.com/xswei/d3js_doc/blob/master/API_Reference/API.md#selections-d3-selection">查看此处</a> .  <br>本系列其他文章:</p>
<ul>
<li><a href="https://blog.csdn.net/peng_9/article/details/105082971">环境搭建</a></li>
<li><span>hello world (使用 D3.js 创建文本并绑定数据)</span></li>
</ul></div></div>
</div>